<div
  class="flex gap-2 justify-content-end align-content-center align-items-center"
>
  <div *ngIf="formGroup">
    <form [formGroup]="formGroup">
      <div
        class="flex gap-2 align-content-center align-items-center"
        *ngIf="vm$ | async as vm"
      >
        <button
          *ngIf="vm.editMode && vm.isInChargeOfEdit"
          [label]="'SEARCH_CONFIG.SAVE_EDIT' | translate"
          icon="{{ saveIcon }}"
          pButton
          type="button"
          (click)="onSearchConfigSaveEdit($event)"
        ></button>
        <button
          *ngIf="vm.editMode && vm.isInChargeOfEdit"
          [label]="'SEARCH_CONFIG.CANCEL_EDIT' | translate"
          icon="{{ stopIcon }}"
          pButton
          type="button"
          (click)="onSearchConfigCancelEdit()"
        ></button>
        <p-dropdown
          id="searchConfigDropdown"
          formControlName="searchConfig"
          [options]="[addSearchConfigOption].concat(vm.searchConfigs)"
          optionLabel="name"
          [placeholder]="
            (vm.editMode
              ? 'SEARCH_CONFIG.EDITING'
              : 'SEARCH_CONFIG.PLACEHOLDER'
            ) | translate: { config: vm.currentConfig?.name }
          "
          [disabled]="vm.editMode"
          (onChange)="onSearchConfigChange($event)"
          appendTo="body"
        >
          <ng-template let-config pTemplate="selectedItem">
            <ng-container *ngIf="vm.editMode; else search_config_selected_item">
              <div class="flex align-items-center gap-2">
                {{
                  'SEARCH_CONFIG.EDITING'
                    | translate: { config: vm.currentConfig?.name }
                }}
              </div>
            </ng-container>
            <ng-template #search_config_selected_item>
              <div
                class="flex align-items-center gap-2"
                *ngIf="config.id === addSearchConfigOption.id"
              >
                {{ 'SEARCH_CONFIG.PLACEHOLDER' | translate }}
              </div>
              <div
                class="flex align-items-center gap-2"
                *ngIf="config.id !== addSearchConfigOption.id"
              >
                <div>
                  {{ config.name }}
                </div>
              </div>
            </ng-template>
          </ng-template>
          <ng-template let-config pTemplate="item">
            <div
              class="flex align-items-center gap-2 h-2rem"
              *ngIf="config.id === addSearchConfigOption.id"
            >
              <i class="{{ plusIcon }}"></i>
              {{ 'SEARCH_CONFIG.CREATE' | translate }}
            </div>
            <div
              class="flex align-items-center gap-2 h-2rem justify-content-between"
              *ngIf="config.id !== addSearchConfigOption.id"
            >
              <div>{{ config.name }}</div>
              <div *ngIf="!config.isReadonly">
                <button
                  pButton
                  type="button"
                  class="p-button-rounded font-medium p-button-text p-button-icon-only"
                  (click)="onSearchConfigEdit($event, config)"
                >
                  <span class="{{ editIcon }}"></span>
                </button>
                <button
                  pButton
                  type="button"
                  class="p-button-rounded font-medium p-button-text p-button-icon-only"
                  (click)="onSearchConfigDelete($event, config)"
                >
                  <span class="{{ deleteIcon }}"></span>
                </button>
              </div>
            </div>
          </ng-template>
        </p-dropdown>
      </div>
    </form>
  </div>
</div>
